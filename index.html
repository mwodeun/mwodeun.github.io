<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MWODEUN ëª¨ë“ ê²½ë§¤</title>
<link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">

<style>
:root{
  --brand:#6a0dad;
  --danger:#d40000;
  --bg:#f5f5f5;
}
*{box-sizing:border-box;}
body{margin:0;font-family:Arial;background:var(--bg);}

.full{width:100%;padding:16px;}

.cardsGrid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:14px;
}
@media(max-width:1000px){
  .cardsGrid{grid-template-columns:repeat(2,1fr);}
}
@media(max-width:600px){
  .cardsGrid{grid-template-columns:repeat(1,1fr);}
}

.card{
  background:white;
  padding:14px;
  border-radius:14px;
  box-shadow:0 8px 20px rgba(0,0,0,0.08);
}
.card img{
  width:100%;
  height:140px;
  object-fit:cover;
  border-radius:10px;
}
.remain{color:var(--danger);font-size:13px;}
button{
  background:var(--brand);
  color:white;
  border:none;
  padding:8px 12px;
  border-radius:10px;
  cursor:pointer;
}
button:hover{background:#5300a8;}

.closingBox{
  background:#fff5f5;
  border:2px solid var(--danger);
  padding:12px;
  border-radius:12px;
  margin-bottom:20px;
}

/* ===== ëª¨ë‹¬ ===== */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.5);
  display:none;
  justify-content:center;
  align-items:center;
}
.modalBox{
  background:white;
  padding:20px;
  width:320px;
  border-radius:14px;
}
.modalBox h3{margin-top:0;}
.modalBox input{
  width:100%;
  padding:8px;
  margin:8px 0;
}
.modalBox label{
  font-size:13px;
}
.modalBox .actions{
  display:flex;
  justify-content:space-between;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="full">

<div class="closingBox">
  <b>ğŸ”¥ ë§ˆê°ì„ë°• (1ì‹œê°„ ì´í•˜)</b>
  <div id="closingList"></div>
</div>

<h3>ì´ë¯¸ì§€ í¬í•¨ ìƒí’ˆ</h3>
<div class="cardsGrid" id="cards"></div>

<h3>ì¹´í…Œê³ ë¦¬ë³„ í…ìŠ¤íŠ¸ ëª©ë¡</h3>
<div id="textBoard"></div>

</div>

<!-- ===== ì…ì°° ëª¨ë‹¬ ===== -->
<div class="modal" id="bidModal">
  <div class="modalBox">
    <h3>ì…ì°°í•˜ê¸°</h3>
    <div id="modalProduct"></div>
    <input type="number" id="bidInput" placeholder="ì…ì°°ê¸ˆ ì…ë ¥ (1000ì› ë‹¨ìœ„)">
    <label>
      <input type="checkbox" id="depositCheck">
      ì…ì°° ë³´ì¦ê¸ˆ 10,000ì› ë™ì˜
    </label>
    <div class="actions">
      <button onclick="closeModal()">ì·¨ì†Œ</button>
      <button onclick="submitBid()">ì…ì°° ì œì¶œ</button>
    </div>
  </div>
</div>

<script>

const products = [
  {id:1,title:"ì „ë™ë“œë¦´",cat:"ê³µêµ¬/ì¥ë¹„",price:10000,end:Date.now()+1800000},
  {id:2,title:"TV ê³ ì¥",cat:"ê³ ì¥&íŒŒì†ì œí’ˆ",price:5000,end:Date.now()+4000000},
  {id:3,title:"ê±´ì„¤ì² ë¬¼",cat:"ê±´ì„¤ ì”ì—¬ìì¬",price:15000,end:Date.now()+2000000},
  {id:4,title:"ìº í•‘í…Œì´ë¸”",cat:"ë ˆì €ìš©í’ˆ",price:7000,end:Date.now()+3500000}
];

let currentProductId = null;

function money(n){
  return n.toLocaleString("ko-KR")+"ì›";
}

function remainText(end){
  const diff = end - Date.now();
  if(diff<=0) return "ë§ˆê°";
  const m = Math.floor(diff/60000);
  return m+"ë¶„";
}

function render(){
  const cards = document.getElementById("cards");
  const textBoard = document.getElementById("textBoard");
  const closingList = document.getElementById("closingList");

  cards.innerHTML="";
  textBoard.innerHTML="";
  closingList.innerHTML="";

  products.forEach(p=>{

    // ì¹´ë“œ
    const c = document.createElement("div");
    c.className="card";
    c.innerHTML=`
      <img src="https://picsum.photos/400/200?random=${p.id}">
      <h4>${p.title}</h4>
      í˜„ì¬ê°€: <b>${money(p.price)}</b><br>
      <span class="remain">ë‚¨ì€ì‹œê°„: ${remainText(p.end)}</span><br><br>
      <button onclick="openModal(${p.id})">ì…ì°°í•˜ê¸°</button>
    `;
    cards.appendChild(c);

    // í…ìŠ¤íŠ¸ ëª©ë¡
    const t = document.createElement("div");
    t.innerHTML=`
      <b>${p.title}</b> |
      í˜„ì¬ê°€: ${money(p.price)} |
      ë‚¨ì€ì‹œê°„: ${remainText(p.end)}
      <br>
    `;
    textBoard.appendChild(t);

    // ë§ˆê°ì„ë°•
    if(p.end-Date.now()<=3600000 && p.end>Date.now()){
      const m = document.createElement("div");
      m.innerText=`${p.title} | ${money(p.price)} | ${remainText(p.end)}`;
      closingList.appendChild(m);
    }

  });

}

function openModal(id){
  currentProductId=id;
  const p = products.find(x=>x.id===id);
  document.getElementById("modalProduct").innerHTML=
    `<b>${p.title}</b><br>í˜„ì¬ê°€: ${money(p.price)}`;
  document.getElementById("bidInput").value="";
  document.getElementById("depositCheck").checked=false;
  document.getElementById("bidModal").style.display="flex";
}

function closeModal(){
  document.getElementById("bidModal").style.display="none";
}

function submitBid(){
  const bid = Number(document.getElementById("bidInput").value);
  const checked = document.getElementById("depositCheck").checked;
  const p = products.find(x=>x.id===currentProductId);

  if(!checked){
    alert("ì…ì°° ë³´ì¦ê¸ˆ 10,000ì› ë™ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.");
    return;
  }

  if(bid%1000!==0){
    alert("ì…ì°°ì€ 1000ì› ë‹¨ìœ„ë¡œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
    return;
  }

  if(bid<=p.price){
    alert("í˜„ì¬ê°€ë³´ë‹¤ ë†’ì€ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.");
    return;
  }

  p.price=bid;
  alert("ì…ì°° ì™„ë£Œ!");
  closeModal();
  render();
}

render();
setInterval(render,60000);

</script>

</body>
</html>
