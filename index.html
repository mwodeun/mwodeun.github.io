<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MWODEUN ëª¨ë“ ê²½ë§¤</title>
<link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">

<style>
:root{
  --brand:#6a0dad;
  --danger:#d40000;
  --bg:#f5f5f5;
}
*{box-sizing:border-box;}
body{margin:0;font-family:Arial;background:var(--bg);}

/* í•˜ëŠ˜ ë°°ê²½ */
.sky{
  background:linear-gradient(180deg,#48b2ff 0%,#86cfff 50%,#d9f3ff 100%);
  padding:18px;
  border-bottom:1px solid rgba(0,0,0,0.06);
}

/* ë¡œê³  */
.logoWrap{display:flex;align-items:center;gap:14px;}
.logoCircle{
  width:96px;height:96px;border-radius:50%;
  background:#fff;display:flex;align-items:center;justify-content:center;
  box-shadow:0 10px 25px rgba(0,0,0,0.10);
  border:1px solid rgba(0,0,0,0.06);
}
.logoCircle img{height:70px;width:auto;display:block;}
.titleText{font-weight:900;font-size:22px;color:#08324d;}

/* ë°°ë„ˆ */
.banner{
  margin-top:12px;
  background:rgba(255,255,255,0.60);
  border:1px solid rgba(255,255,255,0.55);
  border-radius:16px;
  padding:14px;
  overflow:hidden;
  box-shadow:0 12px 28px rgba(0,0,0,0.10);
}
.marquee{
  font-family:"Jua",sans-serif;
  font-size:18px;
  white-space:nowrap;
  transform:translateX(-55%);
  animation:slideStop 5s ease-out 1 forwards;
  color:#08324d;
}
@keyframes slideStop{
  0%{transform:translateX(-55%);}
  70%{transform:translateX(0);}
  100%{transform:translateX(0);}
}

/* ë©”ë‰´ */
.navTop{
  margin-top:12px;
  background:var(--brand);
  padding:10px;
  border-radius:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}
.navTop .left{display:flex;gap:8px;flex-wrap:wrap;align-items:center;}
.navTop a{
  color:#fff;text-decoration:none;
  padding:8px 12px;border-radius:10px;font-weight:900;font-size:13px;
}
.navTop a:hover{background:rgba(255,255,255,0.18);}

.navBottom{
  margin-top:8px;
  background:#222;
  padding:10px;
  border-radius:12px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  justify-content:center;
}
.navBottom a{
  color:#fff;text-decoration:none;
  padding:8px 12px;border-radius:10px;font-weight:800;font-size:13px;
}
.navBottom a:hover{background:rgba(106,13,173,0.40);}

/* ì»¨í…ì¸  */
.container{max-width:1100px;margin:18px auto;padding:0 15px;}

/* ë§ˆê°ì„ë°• ë°•ìŠ¤ */
.closingBox{
  background:#fff5f5;
  border:2px solid var(--danger);
  border-radius:16px;
  padding:14px;
  margin-bottom:16px;
  box-shadow:0 6px 16px rgba(0,0,0,0.06);
}
.closingTop{display:flex;justify-content:space-between;align-items:center;gap:10px;}
.closingBox h3{color:var(--danger);margin:0;font-size:16px;}
.closingItem{margin-top:8px;font-size:13px;line-height:1.35;}
.smallBtn{
  background:#111;color:#fff;border:none;
  padding:8px 12px;border-radius:12px;cursor:pointer;font-weight:900;
}
.smallBtn:hover{background:#000;}

/* 7ì¹¸ í…ìŠ¤íŠ¸ ë³´ë“œ */
.textBoard{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  background:#fff;
  border-radius:14px;
  overflow:hidden;
  box-shadow:0 6px 16px rgba(0,0,0,0.06);
}
.textCol{
  border-right:1px solid #eee;
  padding:10px;
  font-size:12px;
  min-height:180px;
}
.textCol:last-child{border-right:none;}
.textCol h4{
  margin:0 0 8px;
  font-size:13px;
  border-bottom:1px solid #eee;
  padding-bottom:6px;
}
.textItem{margin-bottom:10px;padding-bottom:8px;border-bottom:1px dashed #eee;}
.textItem b{display:block;font-size:12px;}
.textItem span{display:block;color:#444;margin-top:2px;}

/* ì¹´ë“œ */
.cards{display:flex;flex-wrap:wrap;gap:18px;justify-content:center;margin-top:18px;}
.card{
  width:300px;background:#fff;padding:14px;border-radius:14px;
  box-shadow:0 8px 20px rgba(0,0,0,0.08);
}
.card img{width:100%;height:170px;object-fit:cover;border-radius:12px;}
.card h3{margin:10px 0 8px;font-size:16px;}
.remain{color:var(--danger);font-size:13px;margin:6px 0;}
button.mainBtn{
  background:var(--brand);color:#fff;border:none;
  padding:8px 12px;border-radius:12px;cursor:pointer;font-weight:900;
}
button.mainBtn:hover{background:#5300a8;}
</style>
</head>

<body>

<div class="sky">
  <div class="logoWrap">
    <div class="logoCircle"><img src="logo.png" alt="logo"></div>
    <div class="titleText">MWODEUN ëª¨ë“ ê²½ë§¤</div>
  </div>

  <div class="banner">
    <div class="marquee">
      ì–´ì©Œë©´ ë²„ë ¤ì§ˆì§€ë„ ëª¨ë¥´ëŠ” ë‹¹ì‹ ì˜ ëª¨ë“ ê²ƒì„ ì ˆì‹¤í•˜ê²Œ í•©ë¦¬ì ì¸ ê°€ê²©ìœ¼ë¡œ ì¬ì‚¬ìš©ë ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ ë“œë¦½ë‹ˆë‹¤
    </div>
  </div>

  <div class="navTop">
    <div class="left">
      <a href="#" id="navHome">HOME</a>
      <a href="#" id="navRules">ìš´ì˜ê·œì¹™</a>
      <a href="#" id="navSell">íŒë§¤ë“±ë¡</a>
      <a href="#" id="navMy">ë§ˆì´í˜ì´ì§€</a>
    </div>
    <div style="color:rgba(255,255,255,0.9);font-size:12px;font-weight:900;">
      âœ… ëŠë ¤ì§ ë°©ì§€: ìë™ ìƒˆë¡œê³ ì¹¨ ìµœì†Œí™”
    </div>
  </div>

  <div class="navBottom">
    <a href="#" class="cat" data-cat="ì „ì²´">ì§„í–‰ì¤‘ì¸ ê²½ë§¤</a>
    <a href="#" class="cat" data-cat="ê±´ì„¤ ì”ì—¬ìì¬">ê±´ì„¤ì”ì—¬ìì¬</a>
    <a href="#" class="cat" data-cat="ê°€ì „ì œí’ˆ">ê°€ì „ì œí’ˆ</a>
    <a href="#" class="cat" data-cat="ê³µêµ¬/ì¥ë¹„">ê³µêµ¬/ì¥ë¹„</a>
    <a href="#" class="cat" data-cat="ë ˆì €ìš©í’ˆ">ë ˆì €ìš©í’ˆ</a>
    <a href="#" class="cat" data-cat="ê³ ì¥&íŒŒì†ì œí’ˆ">ê³ ì¥&íŒŒì†í’ˆ</a>
    <a href="#" id="closingOnly">ë§ˆê°ì„ë°•</a>
    <a href="#" class="cat" data-cat="êµ¬í•´ìš”">êµ¬í•´ìš”</a>
  </div>
</div>

<div class="container">

  <!-- ğŸ”´ ë§ˆê°ì„ë°• ê°•ì¡° ë°•ìŠ¤ -->
  <div class="closingBox">
    <div class="closingTop">
      <h3>ğŸ”¥ ë§ˆê°ì„ë°• (1ì‹œê°„ ì´í•˜)</h3>
      <button class="smallBtn" id="refreshBtn">ëª©ë¡ ê°±ì‹ </button>
    </div>
    <div id="closingList" class="closingItem">ê³„ì‚°ì¤‘...</div>
  </div>

  <!-- 7ì¹¸ í…ìŠ¤íŠ¸ ë³´ë“œ -->
  <div class="textBoard" id="textBoard">
    <div class="textCol" data-col="ê±´ì„¤ ì”ì—¬ìì¬"><h4>ê±´ì„¤ì”ì—¬ìì¬</h4></div>
    <div class="textCol" data-col="ê°€ì „ì œí’ˆ"><h4>ê°€ì „ì œí’ˆ</h4></div>
    <div class="textCol" data-col="ê³µêµ¬/ì¥ë¹„"><h4>ê³µêµ¬/ì¥ë¹„</h4></div>
    <div class="textCol" data-col="ê³ ì¥&íŒŒì†ì œí’ˆ"><h4>ê³ ì¥&íŒŒì†í’ˆ</h4></div>
    <div class="textCol" data-col="ë ˆì €ìš©í’ˆ"><h4>ë ˆì €ìš©í’ˆ</h4></div>
    <div class="textCol" data-col="êµ¬í•´ìš”"><h4>êµ¬í•´ìš”</h4></div>
    <div class="textCol" data-col="ê¸°íƒ€"><h4>ê¸°íƒ€</h4></div>
  </div>

  <!-- ì¹´ë“œ ì˜ì—­ -->
  <div class="cards" id="cards"></div>

</div>

<script>
/* =========================================
   âœ… ì„±ëŠ¥ ìµœì í™” í¬ì¸íŠ¸
   1) setIntervalë¡œ DOM ì „ì²´ ì¬ìƒì„± ê¸ˆì§€
   2) ì²˜ìŒ 1ë²ˆë§Œ DOM ìƒì„±
   3) ì´í›„ì—ëŠ” â€œí…ìŠ¤íŠ¸ë§Œâ€ 1ë¶„ì— 1ë²ˆ ê°±ì‹ 
========================================= */

const products = [
  {id:1,title:"ì „ë™ë“œë¦´",cat:"ê³µêµ¬/ì¥ë¹„",price:10000,end:Date.now()+1800000},
  {id:2,title:"TV ê³ ì¥",cat:"ê³ ì¥&íŒŒì†ì œí’ˆ",price:5000,end:Date.now()+4000000},
  {id:3,title:"ê±´ì„¤ì² ë¬¼",cat:"ê±´ì„¤ ì”ì—¬ìì¬",price:15000,end:Date.now()+2000000},
  {id:4,title:"ìº í•‘í…Œì´ë¸”",cat:"ë ˆì €ìš©í’ˆ",price:7000,end:Date.now()+3500000}
];

let selectedCat = "ì „ì²´";
let filterClosingOnly = false;

function money(n){ return Number(n||0).toLocaleString("ko-KR")+"ì›"; }

function remainText(endMs){
  const diff = endMs - Date.now();
  if (diff <= 0) return "ë§ˆê°";
  const mins = Math.floor(diff / 60000);
  const hrs = Math.floor(mins / 60);
  const mm = mins % 60;
  if (hrs >= 1) return `${hrs}ì‹œê°„ ${mm}ë¶„`;
  return `${mm}ë¶„`;
}

function isClosing(endMs){
  const diff = endMs - Date.now();
  return diff > 0 && diff <= 3600000; // 1ì‹œê°„ ì´í•˜
}

/* âœ… 1) ì¹´ë“œ DOMì€ ìµœì´ˆ 1ë²ˆë§Œ ìƒì„± */
function buildCardsOnce(){
  const wrap = document.getElementById("cards");
  wrap.innerHTML = "";
  products.forEach(p=>{
    const card = document.createElement("div");
    card.className = "card";
    card.setAttribute("data-id", p.id);

    const img = document.createElement("img");
    img.src = `https://via.placeholder.com/300x180/6a0dad/ffffff?text=${encodeURIComponent(p.title)}`;
    img.alt = p.title;

    const h3 = document.createElement("h3");
    h3.textContent = p.title;

    const price = document.createElement("div");
    price.className = "price";
    price.innerHTML = `í˜„ì¬ê°€: <b class="pPrice">${money(p.price)}</b>`;

    const remain = document.createElement("div");
    remain.className = "remain";
    remain.innerHTML = `ë‚¨ì€ì‹œê°„: <b class="pRemain">${remainText(p.end)}</b>`;

    const btn = document.createElement("button");
    btn.className = "mainBtn";
    btn.textContent = "ì…ì°°í•˜ê¸°";
    btn.addEventListener("click", ()=>{
      alert("ë°ëª¨: ì…ì°° ê¸°ëŠ¥ì€ ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì—°ê²°í•©ë‹ˆë‹¤.");
    });

    card.appendChild(img);
    card.appendChild(h3);
    card.appendChild(price);
    card.appendChild(remain);
    card.appendChild(btn);
    wrap.appendChild(card);
  });
}

/* âœ… 2) í…ìŠ¤íŠ¸ ë³´ë“œë„ â€œì „ì²´ë¥¼ ë‹¤ì‹œ ë§Œë“¤ì§€ ì•Šê³ â€ ë‚´ìš©ë§Œ ê°±ì‹  */
function updateTextBoard(){
  const cols = document.querySelectorAll(".textCol");
  cols.forEach(col=>{
    const head = col.querySelector("h4").outerHTML;
    col.innerHTML = head; // ì œëª©ë§Œ ìœ ì§€í•˜ê³  ë‚´ìš© ì´ˆê¸°í™”
  });

  const now = Date.now();
  products.forEach(p=>{
    if (p.end <= now) return; // ì§„í–‰ì¤‘ë§Œ
    if (selectedCat !== "ì „ì²´" && p.cat !== selectedCat) return;

    const col = document.querySelector(`.textCol[data-col="${p.cat}"]`) ||
                document.querySelector(`.textCol[data-col="ê¸°íƒ€"]`);
    if (!col) return;

    const item = document.createElement("div");
    item.className = "textItem";
    item.innerHTML = `
      <b>${p.title}</b>
      <span>${money(p.price)}</span>
      <span>ë‚¨ì€ì‹œê°„: ${remainText(p.end)}</span>
    `;
    col.appendChild(item);
  });
}

/* âœ… 3) ë§ˆê°ì„ë°• ë°•ìŠ¤ ì—…ë°ì´íŠ¸ (í…ìŠ¤íŠ¸ë§Œ) */
function updateClosingBox(){
  const box = document.getElementById("closingList");
  const list = products
    .filter(p=>isClosing(p.end))
    .sort((a,b)=>a.end-b.end)
    .map(p=>`${p.title} | ${money(p.price)} | ${remainText(p.end)}`)
    .slice(0, 10);

  box.innerHTML = list.length ? list.join("<br>") : "ë§ˆê°ì„ë°• ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.";
}

/* âœ… 4) ì¹´ë“œ í‘œì‹œ í•„í„°(ìˆ¨ê¹€/í‘œì‹œë§Œ ì²˜ë¦¬) */
function applyCardFilter(){
  document.querySelectorAll(".card").forEach(card=>{
    const id = Number(card.getAttribute("data-id"));
    const p = products.find(x=>x.id===id);
    if (!p) return;

    const alive = p.end > Date.now();
    if (!alive) { card.style.display = "none"; return; }

    if (filterClosingOnly){
      card.style.display = isClosing(p.end) ? "" : "none";
      return;
    }

    if (selectedCat === "ì „ì²´"){
      card.style.display = "";
    }else{
      card.style.display = (p.cat === selectedCat) ? "" : "none";
    }
  });
}

/* âœ… ì „ì²´ ê°±ì‹  (ê°€ë²¼ì›€) */
function refreshAll(){
  updateClosingBox();
  updateTextBoard();
  applyCardFilter();
}

/* ë©”ë‰´ í´ë¦­ */
document.querySelectorAll(".cat").forEach(a=>{
  a.addEventListener("click",(e)=>{
    e.preventDefault();
    selectedCat = a.getAttribute("data-cat") || "ì „ì²´";
    filterClosingOnly = false;
    refreshAll();
    window.scrollTo({top: document.querySelector(".container").offsetTop - 10, behavior:"smooth"});
  });
});

document.getElementById("closingOnly").addEventListener("click",(e)=>{
  e.preventDefault();
  filterClosingOnly = true;
  selectedCat = "ì „ì²´";
  refreshAll();
});

document.getElementById("refreshBtn").addEventListener("click", ()=>{
  refreshAll();
});

/* ì´ˆê¸° ì‹¤í–‰ */
buildCardsOnce();
refreshAll();

/* âœ… 1ë¶„ì— í•œ ë²ˆë§Œ â€œí…ìŠ¤íŠ¸ë§Œâ€ ê°±ì‹  (DOM ì „ì²´ ì¬ìƒì„± X) */
setInterval(()=>{
  refreshAll();
}, 60000);
</script>

</body>
</html>
